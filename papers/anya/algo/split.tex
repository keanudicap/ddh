\begin{algorithmic}
\STATE {\bf input}: interval $\langle [x_{\min},x_{\max}], y, p, dir\rangle$
\STATE $I := \emptyset$, $C := \emptyset$
\STATE $x_1 := -1; x_2 := -1$
\STATE $obs := obstacle?(x_{\min}-1,y+dir)$
\IF{$\neg obs$}
\STATE $x_1 := x_{\min}$
\ENDIF
\FOR{$current\_x := x_{\min} ; current\_x \le x_{\max} ; current\_x++$}
  \STATE 
\ENDFOR
%
\WHILE{$\langle x_1, x_2\rangle := next\_interval([x_{\min},x_{\max}],y)$}
  \STATE $I := I \cup \{\langle [x_1,x_2], y, p, dir \rangle\}$
  \FORALL{$k \in \{1,2\}$}
    \IF{square from $\langle x_i,y\rangle$ 
      with horizontal direction $x_i - x$ and vertical direction $dir$ 
      is not an obstacle}
      \STATE $C := C \cup \{\langle x_i,y\rangle\}$
    \ENDIF
  \ENDFOR
\ENDWHILE
\RETURN $\langle I, C \rangle$
\end{algorithmic}
